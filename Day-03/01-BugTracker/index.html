<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bug Tracker</title>
    <script>
    /*
    Use Cases
    =========
    1. List the bugs - done
    2. Add a new bug - done
    3. Toggle the 'closed' status of the bug - done
    4. Remove closed bugs - done
    5. Display statistics - done
    6. Search for bugs
    7. Sort the bugs
    8. Improve the bug display
    9. Persist the bugs in the localStorage
    10. Display the 'createdAt' for each bug
    11. Persist the bugs in the server
    ======
    12. Categorize the bugs
    */
    </script>
    <link rel="stylesheet" href="style.css">
    <script src="angular.js"></script>
    <script>
        var bugTrackerApp = angular.module("bugTrackerApp", []);
        bugTrackerApp.controller("bugsController", function($scope){
            $scope.getClosedCount = function(){
                var result = 0;
                for(var i=0; i<$scope.bugs.length; i++)
                    if ($scope.bugs[i].isClosed)
                        ++result;
                return result;
            };

            $scope.bugs = [
                { name : "Unable to add bugs", isClosed : false},
                { name : "User authentication failure", isClosed : false},
                { name : "Server communication distrupts frequently", isClosed : false},
            ];
            $scope.newBug = '';
            $scope.addNew = function(){
                var bug2Add = {
                    name : $scope.newBug,
                    isClosed : false
                };
                $scope.bugs.push(bug2Add);
            };
            $scope.toggle = function(bug){
                bug.isClosed = !bug.isClosed;
            };
            $scope.removeClosed = function(){
                for(var i=$scope.bugs.length-1; i>=0; i--)
                    if ($scope.bugs[i].isClosed)
                        $scope.bugs.splice(i,1);
            };
        });
    </script>
</head>
<body ng-app="bugTrackerApp" ng-controller="bugsController">
    <h1>Bug Tracker</h1>
    <section class="stats">
        <span class="closed">{{getClosedCount()}}</span>
        <span class="separator">/</span>
        <span>{{bugs.length}}</span>
    </section>
    <section class="search">
        <label for="">Search :</label>
        <input type="text" name="" id="">
        <label for="">isClosed ? :</label>
        <input type="checkbox" name="" id="">
    </section>
    <section class="sort">
        <label for="">Order By :</label>
        <input type="text" name="" id="">
        <label for="">Descending ? :</label>
        <input type="checkbox" name="" id="">
    </section>
    <section class="list">
        <label for="">Bug :</label>
        <input type="text" ng-model="newBug">
        <input type="button" value="Add New" ng-click="addNew()">
        <input type="button" value="Remove Closed" ng-click="removeClosed()">
        <ol>
            <li ng-repeat="bug in bugs" ng-click="toggle(bug)">
                <span ng-class="{closed : bug.isClosed}">{{bug}}</span>
            </li>

        </ol>
    </section>
</body>
</html>
